# NotebookLM 智能问答

基于知识库智能回答用户问题。

---

**用户问题**: $ARGUMENTS

---

## 执行流程

### 1. 理解问题意图

分析问题类型:
- **事实查询**: "XX 是什么？"、"项目预算是多少？"
- **对比分析**: "A 和 B 的区别？"、"哪个方案更好？"
- **时间线追溯**: "XX 如何发展的？"、"进度变化？"
- **综合洞察**: "有哪些关键发现？"、"主要风险？"

### 2. 调用 Smart Retrieval Skill

使用 `/skill custom/smart-retrieval` 智能检索:

```
输入:
- query: $ARGUMENTS（用户问题）
- knowledge_base_path: 从 .notebooklm/config.md 读取
- top_k: 5

输出:
[
  {
    "path": "文档路径",
    "score": 0.95,
    "reason": "包含关键词 X、Y，且是最新文档",
    "preview": "前500字符预览"
  },
  ...
]
```

### 3. 调用 Context Builder Skill

使用 `/skill custom/context-builder` 构建上下文:

```
输入:
- documents: [Smart Retrieval 返回的文档列表]
- query: $ARGUMENTS
- max_tokens: 10000

输出:
结构化上下文，包含:
- 相关文档摘要
- 关键段落（带位置）
- 跨文档的共同主题
- 矛盾或差异点
```

### 4. 生成答案

基于构建的上下文，Claude 综合分析并回答问题:

- 直接引用原文（带文件名和位置）
- 综合多个来源
- 突出重点
- 客观陈述

### 5. 输出格式

```markdown
## 🤔 您的问题
[复述用户问题]

## ✅ 答案
[基于文档的回答，段落形式]

根据文档分析，[核心答案]...

具体来说：
1. [要点1]
   > "[原文引用]"
   > 📄 来源: 文档名.pdf 第 3 页

2. [要点2]
   > "[原文引用]"
   > 📄 来源: 文档名.docx 第 12 段

### 📊 关键数据（如果有）
| 指标 | 数值 | 来源 |
|------|------|------|
| XX | YY | 文档A |

### 📄 信息来源
1. [文档名1](路径) - 相关度: 95%
2. [文档名2](路径) - 相关度: 87%
3. ...

## 💡 您可能还想了解
- [相关问题1]
- [相关问题2]
- [相关问题3]

## 🔍 深入探索
- 深度研究: `/notebook-research [主题]`
- 生成报告: `/notebook-report analysis "[主题]"`
```

---

## 智能检索原理

### 第一轮: 文件名匹配
- 从索引中搜索关键词
- 匹配文件名和路径

### 第二轮: 元数据过滤
- 根据修改时间（优先最新）
- 根据文件类型（如查"图表"优先 Excel/PPT）

### 第三轮: 内容预览
- 读取前 500 字符
- 计算相关度评分

---

## 示例

**用户**: `/notebook-ask 项目的主要风险是什么？`

**输出**:
```
## 🤔 您的问题
项目的主要风险是什么？

## ✅ 答案
根据文档分析，项目面临三大主要风险：

1. **预算超支风险**（高优先级）
   > "当前预算储备仅 5%，低于行业标准 10-15%"
   > 📄 来源: risk-assessment.pdf 第 3 页

2. **进度延期风险**（中优先级）
   > "关键路径上的模块 B 依赖外部供应商，交付存在不确定性"
   > 📄 来源: project-plan.docx 第 12 段

3. **技术债务风险**（中优先级）
   > "团队在会议中提到现有架构难以扩展"
   > 📄 来源: meeting-notes-2024.txt 2024-03-15 会议

### 📊 风险评估汇总
| 风险类型 | 优先级 | 提及频率 | 缓解措施 |
|---------|--------|---------|---------|
| 预算超支 | 高 | 3次 | 增加储备金 |
| 进度延期 | 中 | 2次 | 寻找备选供应商 |
| 技术债务 | 中 | 1次 | 架构重构计划 |

### 📄 信息来源
1. [risk-assessment.pdf](path) - 相关度: 98%
2. [project-plan.docx](path) - 相关度: 85%
3. [meeting-notes-2024.txt](path) - 相关度: 72%

## 💡 您可能还想了解
- 这些风险的具体缓解措施是什么？
- 历史项目中类似风险是如何解决的？
- 是否有应急预案文档？

## 🔍 深入探索
- 深度研究: `/notebook-research 项目风险管理`
- 生成报告: `/notebook-report analysis "项目风险评估报告"`
```

---

## 注意事项

- ✅ 所有答案基于文档，不编造信息
- ✅ 不确定时明确标注"需要人工确认"
- ✅ 多个来源有矛盾时，列出所有观点
- ✅ 重要数据必须标注来源
