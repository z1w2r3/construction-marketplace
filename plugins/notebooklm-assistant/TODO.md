# NotebookLM Assistant - 待完善清单

记录当前版本（v1.0.0）中简化或待完善的功能。

---

## 🚧 当前版本简化的内容

### Commands（命令）

#### 1. notebook-research.md
**当前状态**: 简化版本
**待完善**:
- [ ] 完整的知识图谱构建逻辑
- [ ] 跨文档关联分析
- [ ] 主题聚类算法
- [ ] 矛盾检测和解决
- [ ] 可视化知识网络

**优先级**: 中

---

#### 2. notebook-summarize.md
**当前状态**: 简化版本
**待完善**:
- [ ] 多种摘要风格（简明/详细/技术/商业）
- [ ] 可配置摘要长度
- [ ] 分层摘要（章节摘要 + 整体摘要）
- [ ] 自动提取关键句子
- [ ] 生成执行摘要（Executive Summary）

**优先级**: 中

---

#### 3. notebook-compare.md
**当前状态**: 简化版本
**待完善**:
- [ ] 多维度对比矩阵
- [ ] 自动识别对比维度
- [ ] 量化对比（如果有数据）
- [ ] 可视化对比结果（表格/图表）
- [ ] 版本追踪（Git集成）

**优先级**: 中

---

#### 4. notebook-chat.md
**当前状态**: 未实现
**待实现**:
- [ ] 持续对话会话管理
- [ ] 上下文记忆（记住之前的问答）
- [ ] 会话保存和恢复
- [ ] 多轮问答优化
- [ ] 特殊命令支持（'summarize', 'insights', 'exit'）

**优先级**: 高（用户高频需求）

---

### Custom Skills（自定义技能）

#### 1. smart-retrieval.md
**当前状态**: 基础实现
**待完善**:
- [ ] 语义搜索（使用 embedding）
- [ ] 缓存最近检索结果
- [ ] 支持模糊匹配（拼音、同义词）
- [ ] 增量索引更新
- [ ] 检索结果可解释性（为什么选这些文档）

**优先级**: 高

---

#### 2. context-builder.md
**当前状态**: 基础实现
**待完善**:
- [ ] 智能段落摘要（更好的压缩算法）
- [ ] 表格自动提取和格式化
- [ ] 并行文档读取（异步 I/O）
- [ ] 增量上下文构建（流式处理）
- [ ] Token 使用统计和优化建议

**优先级**: 中

---

#### 3. report-structure.md
**当前状态**: 基础框架
**待完善**:
- [ ] 基于文档自动推荐章节
- [ ] 动态调整大纲（根据实际数据）
- [ ] 多种报告模板（学术/商业/技术）
- [ ] 用户自定义大纲
- [ ] 大纲版本控制

**优先级**: 中

---

#### 4. citation-manager.md
**当前状态**: 基础框架
**待完善**:
- [ ] 自动识别需要引用的内容
- [ ] 多种引用格式（APA/MLA/Chicago/GB7714）
- [ ] 引用去重和合并
- [ ] 引用验证（确保引用存在）
- [ ] 导出引用列表（BibTeX 等）

**优先级**: 中

---

#### 5. multi-doc-synthesis.md
**当前状态**: 未实现
**待实现**:
- [ ] Timeline 分析（时间线构建）
- [ ] Pattern 发现（模式识别）
- [ ] Contradiction 检测（矛盾识别）
- [ ] 跨文档主题聚类
- [ ] 知识图谱生成

**优先级**: 高（核心功能）

---

#### 6. data-visualization.md
**当前状态**: 未实现
**待实现**:
- [ ] 自动识别可视化数据
- [ ] 推荐合适的图表类型
- [ ] 生成图表配置（JSON）
- [ ] Word 图表自动插入（使用 python-docx）
- [ ] 图表数据表生成

**优先级**: 高（报告质量提升）

---

### MCP Servers（MCP 服务器）

#### 1. filesystem-indexer/server.py
**当前状态**: 基础功能完整
**待优化**:
- [ ] 增量索引更新（只扫描修改的文件）
- [ ] 并行扫描（多线程）
- [ ] 更好的关键词提取（jieba/NLTK）
- [ ] 索引压缩（减少存储空间）
- [ ] 索引版本管理

**优先级**: 中

---

#### 2. report-generator/server.py
**当前状态**: 基础功能完整
**待优化**:
- [ ] Word 图表自动插入（不只是占位符）
- [ ] 更多报告模板
- [ ] 自定义样式支持
- [ ] PDF 直接生成（不依赖 LibreOffice）
- [ ] 报告预览（HTML 格式）

**优先级**: 高（用户体验）

---

## 🎯 新功能规划

### v1.1.0 规划

#### 1. 对话模式
**描述**: 持续对话功能，支持多轮问答
**Commands**:
- [ ] `/notebook-chat` - 进入对话模式
- [ ] `/notebook-session-list` - 列出历史会话
- [ ] `/notebook-session-load [ID]` - 加载历史会话

**Skills**:
- [ ] `session-manager.md` - 会话管理
- [ ] `memory-manager.md` - 对话记忆

**预计工作量**: 2-3 天

---

#### 2. 语义搜索
**描述**: 基于 embedding 的语义搜索，提高检索准确度
**修改**:
- [ ] `smart-retrieval.md` - 增加 embedding 支持
- [ ] `filesystem-indexer/server.py` - 增加 embedding 生成

**依赖**:
- `sentence-transformers` 或 `openai` API

**预计工作量**: 2-3 天

---

#### 3. 图表自动插入
**描述**: 在 Word 报告中自动插入图表，而不仅是占位符
**修改**:
- [ ] `report-generator/server.py` - 增加图表生成
- [ ] 使用 `python-docx` 的图表 API

**预计工作量**: 1-2 天

---

### v1.2.0 规划

#### 1. 知识图谱可视化
**描述**: 生成可交互的知识图谱
**格式**: HTML + D3.js 或 Cytoscape.js

**预计工作量**: 3-5 天

---

#### 2. 团队协作
**描述**: 支持团队共享知识库
**功能**:
- 共享索引
- 协作标注
- 权限管理

**预计工作量**: 5-7 天

---

## 🐛 已知问题

### 1. 大文件处理慢
**问题**: 处理超过 100MB 的文件时速度较慢
**原因**: 同步读取文件
**解决方案**: 使用异步 I/O 或分块读取
**优先级**: 高

---

### 2. PDF 表格提取不准确
**问题**: 复杂 PDF 表格提取可能不准确
**原因**: `pdfplumber` 的限制
**解决方案**: 尝试 `camelot-py` 或 `tabula-py`
**优先级**: 中

---

### 3. 中文分词简单
**问题**: 当前使用空格分词，对中文不友好
**原因**: 未集成专业分词库
**解决方案**: 集成 `jieba`
**优先级**: 中

---

## 📝 代码质量改进

### 1. 单元测试
**待添加**:
- [ ] MCP 服务器的单元测试
- [ ] Skills 的单元测试
- [ ] 端到端测试

**框架**: `pytest`
**预计工作量**: 3-5 天

---

### 2. 错误处理
**待改进**:
- [ ] 统一的错误处理机制
- [ ] 更友好的错误提示
- [ ] 自动重试机制（网络错误等）

**预计工作量**: 1-2 天

---

### 3. 性能优化
**待优化**:
- [ ] 索引加载优化（懒加载）
- [ ] 文档读取缓存
- [ ] 并行处理（多文档读取）

**预计工作量**: 2-3 天

---

### 4. 代码重构
**待重构**:
- [ ] 提取公共工具函数
- [ ] 统一配置管理
- [ ] 改进模块化

**预计工作量**: 2-3 天

---

## 📚 文档改进

### 1. 示例和教程
**待添加**:
- [ ] 完整的使用示例（带截图）
- [ ] 视频教程
- [ ] 最佳实践指南

**预计工作量**: 1-2 天

---

### 2. API 文档
**待添加**:
- [ ] Skills API 文档
- [ ] MCP 工具文档
- [ ] 配置文件格式文档

**预计工作量**: 1 天

---

### 3. 贡献指南
**待添加**:
- [ ] CONTRIBUTING.md
- [ ] 开发环境设置
- [ ] 代码规范

**预计工作量**: 0.5 天

---

## 🎨 用户体验改进

### 1. 进度提示
**待改进**:
- [ ] 显示索引进度（X/N 个文件）
- [ ] 报告生成进度（X/Y 章节）
- [ ] 预估剩余时间

**预计工作量**: 1 天

---

### 2. 交互优化
**待改进**:
- [ ] 更友好的配置向导
- [ ] 命令自动补全建议
- [ ] 错误恢复建议

**预计工作量**: 1-2 天

---

### 3. 多语言支持
**待添加**:
- [ ] 英文界面
- [ ] 配置语言选项

**预计工作量**: 1 天

---

## 📊 优先级总结

### 高优先级（v1.1.0）
1. ✅ 对话模式（`notebook-chat.md`）
2. ✅ 语义搜索（`smart-retrieval.md` 升级）
3. ✅ 图表自动插入（`report-generator` 升级）
4. ✅ 多文档综合分析（`multi-doc-synthesis.md`）
5. ✅ 数据可视化建议（`data-visualization.md`）

### 中优先级（v1.2.0）
1. 知识图谱可视化
2. 性能优化（大文件处理）
3. 更好的摘要和对比功能
4. PDF 表格提取改进

### 低优先级（v2.0.0）
1. 团队协作功能
2. API 接口
3. Web 界面

---

## 🔄 更新记录

**2025-10-18**: 创建初始 TODO 清单（v1.0.0 发布）

---

*此清单会随着开发进度持续更新*
